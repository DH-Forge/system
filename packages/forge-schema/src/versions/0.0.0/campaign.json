{
   "$schema": "https://json-schema.org/draft/2020-12/schema",
   "type": "object",
   "properties": {
      "_type": {
         "const": "campaignRuleset"
      },
      "_meta": {
         "type": "object",
         "properties": {
            "rulesetUrl": {
               "type": "string",
               "format": "uri"
            },
            "rulesetVersion": {
               "type": "string",
               "pattern": "^\\d+\\.\\d+\\.\\d+$"
            },
            "dateCreated": {
               "type": "string",
               "format": "date-time",
               "pattern": "^((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))T([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(\\.\\d+)?(Z)$"
            },
            "dateUpdated": {
               "type": "string",
               "format": "date-time",
               "pattern": "^((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))T([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(\\.\\d+)?(Z)$"
            }
         },
         "required": [
            "rulesetUrl",
            "rulesetVersion",
            "dateCreated",
            "dateUpdated"
         ],
         "additionalProperties": false
      },
      "homebrew": {
         "type": "object",
         "properties": {
            "item/armor": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/__schema0"
               }
            },
            "item/special": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/__schema1"
               }
            },
            "item/weapon": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/__schema2"
               }
            },
            "role/class": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "type": "object",
                  "properties": {
                     "_type": {
                        "const": "class"
                     },
                     "name": {
                        "type": "string"
                     },
                     "domain": {
                        "type": "object",
                        "properties": {
                           "_type": {
                              "const": "reference"
                           },
                           "_key": {
                              "const": "role/domain"
                           },
                           "value": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "_type",
                           "_key",
                           "value"
                        ],
                        "additionalProperties": false
                     },
                     "initialEvasion": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 100
                     },
                     "initialHitPoints": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                     },
                     "initialInventory": {
                        "type": "array",
                        "items": {
                           "anyOf": [
                              {
                                 "$ref": "#/$defs/__schema1"
                              },
                              {
                                 "$ref": "#/$defs/__schema2"
                              },
                              {
                                 "$ref": "#/$defs/__schema0"
                              }
                           ]
                        }
                     },
                     "features": {
                        "type": "array",
                        "items": {
                           "type": "object",
                           "properties": {
                              "name": {
                                 "type": "string"
                              },
                              "description": {
                                 "type": "string"
                              }
                           },
                           "required": [
                              "name",
                              "description"
                           ],
                           "additionalProperties": false
                        }
                     },
                     "hopeFeature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     },
                     "subclasses": {
                        "type": "array",
                        "items": {
                           "type": "object",
                           "properties": {
                              "_type": {
                                 "const": "reference"
                              },
                              "_key": {
                                 "const": "role/subclass"
                              },
                              "value": {
                                 "type": "string"
                              }
                           },
                           "required": [
                              "_type",
                              "_key",
                              "value"
                           ],
                           "additionalProperties": false
                        }
                     }
                  },
                  "required": [
                     "_type",
                     "name",
                     "domain",
                     "initialEvasion",
                     "initialHitPoints",
                     "initialInventory",
                     "features",
                     "hopeFeature",
                     "subclasses"
                  ],
                  "additionalProperties": false
               }
            },
            "role/subclass": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "type": "object",
                  "properties": {
                     "_type": {
                        "const": "subclass"
                     },
                     "name": {
                        "type": "string"
                     },
                     "description": {
                        "type": "string"
                     },
                     "spellTrait": {
                        "default": null,
                        "anyOf": [
                           {
                              "$ref": "#/$defs/__schema3"
                           },
                           {
                              "type": "null"
                           }
                        ]
                     },
                     "foundationFeatures": {
                        "type": "array",
                        "items": {
                           "$ref": "#/$defs/__schema4"
                        }
                     },
                     "specializationFeatures": {
                        "type": "array",
                        "items": {
                           "$ref": "#/$defs/__schema4"
                        }
                     },
                     "masteryFeatures": {
                        "type": "array",
                        "items": {
                           "$ref": "#/$defs/__schema4"
                        }
                     }
                  },
                  "required": [
                     "_type",
                     "name",
                     "description",
                     "spellTrait",
                     "foundationFeatures",
                     "specializationFeatures",
                     "masteryFeatures"
                  ],
                  "additionalProperties": false
               }
            },
            "heritage/ancestry": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "type": "object",
                  "properties": {
                     "_type": {
                        "const": "ancestry"
                     },
                     "name": {
                        "type": "string"
                     },
                     "description": {
                        "type": "string"
                     },
                     "primaryFeature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     },
                     "secondaryFeature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     }
                  },
                  "required": [
                     "_type",
                     "name",
                     "primaryFeature",
                     "secondaryFeature"
                  ],
                  "additionalProperties": false
               }
            },
            "heritage/community": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "type": "object",
                  "properties": {
                     "_type": {
                        "const": "community"
                     },
                     "name": {
                        "type": "string"
                     },
                     "description": {
                        "type": "string"
                     },
                     "feature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     }
                  },
                  "required": [
                     "_type",
                     "name",
                     "feature"
                  ],
                  "additionalProperties": false
               }
            }
         },
         "additionalProperties": false
      }
   },
   "required": [
      "_type",
      "_meta",
      "homebrew"
   ],
   "additionalProperties": false,
   "$defs": {
      "__schema0": {
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryArmor",
               "const": "inventoryArmor"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "baseThresholds": {
               "type": "object",
               "properties": {
                  "_type": {
                     "default": "damageThresholds",
                     "const": "damageThresholds"
                  },
                  "major": {
                     "type": "integer",
                     "minimum": 0,
                     "maximum": 100
                  },
                  "severe": {
                     "type": "integer",
                     "minimum": 0,
                     "maximum": 100
                  }
               },
               "required": [
                  "_type",
                  "major",
                  "severe"
               ],
               "additionalProperties": false
            },
            "baseScore": {
               "type": "integer",
               "minimum": 0,
               "maximum": 9007199254740991
            },
            "features": {
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "description",
            "baseThresholds",
            "baseScore",
            "features"
         ],
         "additionalProperties": false
      },
      "__schema1": {
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryThing",
               "const": "inventoryThing"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "description"
         ],
         "additionalProperties": false
      },
      "__schema2": {
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryWeapon",
               "const": "inventoryWeapon"
            },
            "name": {
               "type": "string"
            },
            "trait": {
               "$ref": "#/$defs/__schema3"
            },
            "range": {
               "anyOf": [
                  {
                     "const": "Melee"
                  },
                  {
                     "const": "Very Close"
                  },
                  {
                     "const": "Close"
                  },
                  {
                     "const": "Far"
                  },
                  {
                     "const": "Very Far"
                  }
               ]
            },
            "damageDice": {
               "anyOf": [
                  {
                     "const": "d4"
                  },
                  {
                     "const": "d6"
                  },
                  {
                     "const": "d8"
                  },
                  {
                     "const": "d10"
                  },
                  {
                     "const": "d12"
                  },
                  {
                     "const": "d20"
                  }
               ]
            },
            "damageType": {
               "anyOf": [
                  {
                     "const": "Physical"
                  },
                  {
                     "const": "Magical"
                  }
               ]
            },
            "features": {
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "burden": {
               "anyOf": [
                  {
                     "const": "One-Handed"
                  },
                  {
                     "const": "Two-Handed"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "trait",
            "range",
            "damageDice",
            "damageType",
            "features",
            "burden"
         ],
         "additionalProperties": false
      },
      "__schema3": {
         "anyOf": [
            {
               "const": "Agility"
            },
            {
               "const": "Strength"
            },
            {
               "const": "Finesse"
            },
            {
               "const": "Instinct"
            },
            {
               "const": "Presence"
            },
            {
               "const": "Knowledge"
            }
         ]
      },
      "__schema4": {
         "type": "object",
         "properties": {
            "_type": {
               "const": "feature"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "type": "string"
            },
            "notes": {
               "default": null,
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "modifiers": {
               "default": null,
               "type": "null"
            }
         },
         "required": [
            "_type",
            "name",
            "description",
            "notes",
            "modifiers"
         ],
         "additionalProperties": false
      }
   }
}