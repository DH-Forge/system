{
   "$schema": "https://json-schema.org/draft/2020-12/schema",
   "id": "CampaignRuleset",
   "title": "Campaign Ruleset",
   "description": "A campaign extension of a core ruleset",
   "examples": [
      {
         "_type": "campaignRuleset",
         "_meta": {
            "rulesetUrl": "https://dh-forge.com/schema.json",
            "rulesetVersion": "0.1.0",
            "dateCreated": "2025-05-30T12:00:00.000Z",
            "dateUpdated": "2025-05-30T12:00:00.000Z"
         },
         "homebrew": {
            "item/armor": {},
            "item/weapon": {},
            "item/thing": {},
            "role/class": {},
            "role/subclass": {},
            "heritage/ancestry": {},
            "heritage/community": {}
         }
      }
   ],
   "type": "object",
   "properties": {
      "_type": {
         "const": "campaignRuleset"
      },
      "_meta": {
         "$ref": "#/$defs/SchemaMetadata"
      },
      "homebrew": {
         "type": "object",
         "properties": {
            "item/armor": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Armor"
               }
            },
            "item/thing": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Thing"
               }
            },
            "item/weapon": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Weapon"
               }
            },
            "role/class": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Class"
               }
            },
            "role/subclass": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Subclass"
               }
            },
            "heritage/ancestry": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "title": "Ancestry",
                  "description": "The ancestry of a character",
                  "examples": [
                     {
                        "_type": "ancestry",
                        "name": "Ribbet",
                        "description": "Ribbets resemble anthropomorphic frogs with protruding eyes, and webbed hands and feet.",
                        "primaryFeature": {
                           "name": "Amphibious",
                           "description": "You can breathe and move naturally under water."
                        },
                        "secondaryFeature": {
                           "name": "Long Tounge",
                           "description": "You can use your long tounge to grab onto things within close range. Mark a stress to use your tounge as a finesse close weapon that deals d12 physical damage using your proficiency."
                        }
                     }
                  ],
                  "type": "object",
                  "properties": {
                     "_type": {
                        "const": "ancestry"
                     },
                     "name": {
                        "type": "string"
                     },
                     "description": {
                        "type": "string"
                     },
                     "primaryFeature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     },
                     "secondaryFeature": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },
                           "description": {
                              "type": "string"
                           }
                        },
                        "required": [
                           "name",
                           "description"
                        ],
                        "additionalProperties": false
                     }
                  },
                  "required": [
                     "_type",
                     "name",
                     "primaryFeature",
                     "secondaryFeature"
                  ],
                  "additionalProperties": false
               }
            },
            "heritage/community": {
               "type": "object",
               "propertyNames": {
                  "type": "string"
               },
               "additionalProperties": {
                  "$ref": "#/$defs/Community"
               }
            }
         },
         "additionalProperties": false
      }
   },
   "required": [
      "_type",
      "_meta",
      "homebrew"
   ],
   "additionalProperties": false,
   "$defs": {
      "SchemaMetadata": {
         "id": "SchemaMetadata",
         "title": "Schema Metadata",
         "description": "Metadata about a schema",
         "examples": [
            {
               "rulesetUrl": "https://dh-forge.com/schema.json",
               "rulesetVersion": "1.0.0",
               "dateCreated": "2025-05-30T12:00:00.000Z",
               "dateUpdated": "2025-05-30T12:00:00.000Z"
            }
         ],
         "type": "object",
         "properties": {
            "rulesetUrl": {
               "type": "string",
               "format": "uri"
            },
            "rulesetVersion": {
               "$ref": "#/$defs/SchemaVersion"
            },
            "dateCreated": {
               "type": "string",
               "format": "date-time",
               "pattern": "^((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))T([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(\\.\\d+)?(Z)$"
            },
            "dateUpdated": {
               "type": "string",
               "format": "date-time",
               "pattern": "^((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))T([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(\\.\\d+)?(Z)$"
            }
         },
         "required": [
            "rulesetUrl",
            "rulesetVersion",
            "dateCreated",
            "dateUpdated"
         ],
         "additionalProperties": false
      },
      "SchemaVersion": {
         "id": "SchemaVersion",
         "title": "Schema Version",
         "description": "A version number",
         "examples": [
            "1.0.0",
            "2.10.0",
            "3.0.19"
         ],
         "type": "string",
         "pattern": "^\\d+\\.\\d+\\.\\d+$"
      },
      "Armor": {
         "id": "Armor",
         "title": "Armor",
         "description": "A set of armor that can be equipped by a character",
         "examples": [
            {
               "_type": "inventoryArmor",
               "name": "Full Plate Armor",
               "description": null,
               "baseThresholds": {
                  "_type": "damageThresholds",
                  "major": 8,
                  "severe": 17
               },
               "baseScore": 4,
               "features": [
                  "Very Heavy: -2 to Evasion"
               ]
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryArmor",
               "const": "inventoryArmor"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "baseThresholds": {
               "$ref": "#/$defs/DamageThresholds"
            },
            "baseScore": {
               "type": "integer",
               "minimum": 0,
               "maximum": 9007199254740991
            },
            "features": {
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "description",
            "baseThresholds",
            "baseScore",
            "features"
         ],
         "additionalProperties": false
      },
      "DamageThresholds": {
         "id": "DamageThresholds",
         "title": "Damage Thresholds",
         "description": "The damage thresholds of a character",
         "examples": [
            {
               "_type": "damageThresholds",
               "major": 5,
               "severe": 8
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "default": "damageThresholds",
               "const": "damageThresholds"
            },
            "major": {
               "type": "integer",
               "minimum": 0,
               "maximum": 100
            },
            "severe": {
               "type": "integer",
               "minimum": 0,
               "maximum": 100
            }
         },
         "required": [
            "_type",
            "major",
            "severe"
         ],
         "additionalProperties": false
      },
      "Thing": {
         "id": "Thing",
         "title": "Thing",
         "description": "A thing that can be added to a character's inventory",
         "examples": [
            {
               "_type": "inventoryThing",
               "name": "Suspicious looking potion",
               "description": "The label is written in a language you don't recognize."
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryThing",
               "const": "inventoryThing"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "description"
         ],
         "additionalProperties": false
      },
      "Weapon": {
         "id": "Weapon",
         "title": "Weapon",
         "description": "A weapon that can be equipped by a character",
         "examples": [
            {
               "_type": "inventoryWeapon",
               "name": "Warhammer",
               "trait": "Strength",
               "range": "Melee",
               "damageDice": "d8",
               "damageType": "Physical",
               "features": [
                  "Versatile"
               ],
               "burden": "One-Handed"
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "default": "inventoryWeapon",
               "const": "inventoryWeapon"
            },
            "name": {
               "type": "string"
            },
            "trait": {
               "$ref": "#/$defs/TraitName"
            },
            "range": {
               "$ref": "#/$defs/Range"
            },
            "damageDice": {
               "$ref": "#/$defs/DiceType"
            },
            "damageType": {
               "$ref": "#/$defs/DamageType"
            },
            "features": {
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "burden": {
               "anyOf": [
                  {
                     "const": "One-Handed"
                  },
                  {
                     "const": "Two-Handed"
                  }
               ]
            }
         },
         "required": [
            "_type",
            "name",
            "trait",
            "range",
            "damageDice",
            "damageType",
            "features",
            "burden"
         ],
         "additionalProperties": false
      },
      "TraitName": {
         "id": "TraitName",
         "title": "Trait Name",
         "description": "The name of a character trait",
         "examples": [
            "Agility",
            "Strength",
            "Finesse",
            "Instinct",
            "Presence",
            "Knowledge"
         ],
         "anyOf": [
            {
               "const": "Agility"
            },
            {
               "const": "Strength"
            },
            {
               "const": "Finesse"
            },
            {
               "const": "Instinct"
            },
            {
               "const": "Presence"
            },
            {
               "const": "Knowledge"
            }
         ]
      },
      "Range": {
         "id": "Range",
         "title": "Range",
         "description": "The range of a weapon or ability",
         "examples": [
            "Melee",
            "Very Close",
            "Close",
            "Far",
            "Very Far"
         ],
         "anyOf": [
            {
               "const": "Melee"
            },
            {
               "const": "Very Close"
            },
            {
               "const": "Close"
            },
            {
               "const": "Far"
            },
            {
               "const": "Very Far"
            }
         ]
      },
      "DiceType": {
         "id": "DiceType",
         "title": "Dice Type",
         "description": "The type of dice to roll",
         "examples": [
            "d4",
            "d6",
            "d8",
            "d10",
            "d12",
            "d20"
         ],
         "anyOf": [
            {
               "const": "d4"
            },
            {
               "const": "d6"
            },
            {
               "const": "d8"
            },
            {
               "const": "d10"
            },
            {
               "const": "d12"
            },
            {
               "const": "d20"
            }
         ]
      },
      "DamageType": {
         "id": "DamageType",
         "title": "Damage Type",
         "description": "The type of damage a weapon or ability deals",
         "examples": [
            "Physical",
            "Magical"
         ],
         "anyOf": [
            {
               "const": "Physical"
            },
            {
               "const": "Magical"
            }
         ]
      },
      "Class": {
         "id": "Class",
         "title": "Class",
         "description": "A class of a character",
         "examples": [
            {
               "_type": "class",
               "name": "Barbarian",
               "domain": {
                  "_type": "reference",
                  "_key": "role/domain",
                  "value": "arcana"
               },
               "initialEvasion": 10,
               "initialHitPoints": 5,
               "initialInventory": [
                  {
                     "_type": "inventoryThing",
                     "name": "A romance novel or a letter never opened",
                     "description": null
                  }
               ],
               "features": [
                  {
                     "name": "Rally",
                     "description": "Once per session, describe how you rally the party and give yourself and each of your allies a Rally Die. At level 1, your Rally Die is a d6. A PC can spend their Rally Die to roll it, adding the result to their action roll, reaction roll, damage roll, or to clear a number of Stress equal to the result. At the end of each session, clear all unspent Rally Dice. At level 5, your Rally Die increases to a d8."
                  }
               ],
               "hopeFeature": {
                  "name": "Make a Scene",
                  "description": "Spend 3 Hope to temporarily Distract a target within Close range, giving them a -2 penalty to their Difficulty."
               },
               "subclasses": []
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "class"
            },
            "name": {
               "type": "string"
            },
            "domain": {
               "$ref": "#/$defs/ReferenceDomain"
            },
            "initialEvasion": {
               "type": "integer",
               "minimum": 0,
               "maximum": 100
            },
            "initialHitPoints": {
               "type": "integer",
               "minimum": 0,
               "maximum": 9007199254740991
            },
            "initialInventory": {
               "type": "array",
               "items": {
                  "anyOf": [
                     {
                        "$ref": "#/$defs/Thing"
                     },
                     {
                        "$ref": "#/$defs/Weapon"
                     },
                     {
                        "$ref": "#/$defs/Armor"
                     }
                  ]
               }
            },
            "features": {
               "type": "array",
               "items": {
                  "type": "object",
                  "properties": {
                     "name": {
                        "type": "string"
                     },
                     "description": {
                        "type": "string"
                     }
                  },
                  "required": [
                     "name",
                     "description"
                  ],
                  "additionalProperties": false
               }
            },
            "hopeFeature": {
               "type": "object",
               "properties": {
                  "name": {
                     "type": "string"
                  },
                  "description": {
                     "type": "string"
                  }
               },
               "required": [
                  "name",
                  "description"
               ],
               "additionalProperties": false
            },
            "subclasses": {
               "type": "array",
               "items": {
                  "$ref": "#/$defs/ReferenceSubclass"
               }
            }
         },
         "required": [
            "_type",
            "name",
            "domain",
            "initialEvasion",
            "initialHitPoints",
            "initialInventory",
            "features",
            "hopeFeature",
            "subclasses"
         ],
         "additionalProperties": false
      },
      "ReferenceDomain": {
         "id": "ReferenceDomain",
         "title": "Reference to a Domain",
         "examples": [
            {
               "_type": "reference",
               "_key": "role/domain",
               "value": "arcana"
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "reference"
            },
            "_key": {
               "const": "role/domain"
            },
            "value": {
               "type": "string"
            }
         },
         "required": [
            "_type",
            "_key",
            "value"
         ],
         "additionalProperties": false
      },
      "ReferenceSubclass": {
         "id": "ReferenceSubclass",
         "title": "Reference to a Subclass",
         "examples": [
            {
               "_type": "reference",
               "_key": "role/subclass",
               "value": "troubadour"
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "reference"
            },
            "_key": {
               "const": "role/subclass"
            },
            "value": {
               "type": "string"
            }
         },
         "required": [
            "_type",
            "_key",
            "value"
         ],
         "additionalProperties": false
      },
      "Subclass": {
         "id": "Subclass",
         "title": "Subclass",
         "description": "A subclass of a class",
         "examples": [
            {
               "_type": "subclass",
               "name": "Troubadour",
               "description": "Play the Troubadour if you want to play music to bolster your allies.",
               "spellTrait": "Presence",
               "foundationFeatures": [
                  {
                     "_type": "feature",
                     "name": "Gifted Performer",
                     "description": "You can play three different types of songs, once each per long rest; describe how you perform for others to gain the listed benefit:",
                     "notes": [
                        "Relaxing Song: You and all allies within Close range clear a Hit Point.",
                        "Epic Song: Make a target within Close range temporarily Vulnerable.",
                        "Heartbreaking Song: You and all allies within Close range gain a Hope."
                     ],
                     "modifiers": null
                  }
               ],
               "specializationFeatures": [
                  {
                     "_type": "feature",
                     "name": "Maestro",
                     "description": "Your rallying songs steel the courage of those who listen. When you give a Rally Die to an ally, they can gain a Hope or clear a Stress.",
                     "notes": null,
                     "modifiers": null
                  }
               ],
               "masteryFeatures": [
                  {
                     "_type": "feature",
                     "name": "Virtuoso",
                     "description": "You are among the greatest of your craft and your skill is boundless. You can perform each of your “Gifted Performer” feature’s songs twice per long rest.",
                     "notes": null,
                     "modifiers": null
                  }
               ]
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "subclass"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "type": "string"
            },
            "spellTrait": {
               "default": null,
               "anyOf": [
                  {
                     "$ref": "#/$defs/TraitName"
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "foundationFeatures": {
               "type": "array",
               "items": {
                  "$ref": "#/$defs/Feature"
               }
            },
            "specializationFeatures": {
               "type": "array",
               "items": {
                  "$ref": "#/$defs/Feature"
               }
            },
            "masteryFeatures": {
               "type": "array",
               "items": {
                  "$ref": "#/$defs/Feature"
               }
            }
         },
         "required": [
            "_type",
            "name",
            "description",
            "spellTrait",
            "foundationFeatures",
            "specializationFeatures",
            "masteryFeatures"
         ],
         "additionalProperties": false
      },
      "Feature": {
         "id": "Feature",
         "title": "Feature",
         "description": "A feature for a character to use",
         "examples": [
            {
               "_type": "feature",
               "name": "Gifted Performer",
               "description": "You can play three different types of songs, once each per long rest; describe how you perform for others to gain the listed benefit:",
               "notes": [
                  "Relaxing Song: You and all allies within Close range clear a Hit Point.",
                  "Epic Song: Make a target within Close range temporarily Vulnerable.",
                  "Heartbreaking Song: You and all allies within Close range gain a Hope."
               ],
               "modifiers": null
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "feature"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "type": "string"
            },
            "notes": {
               "default": null,
               "anyOf": [
                  {
                     "type": "array",
                     "items": {
                        "type": "string"
                     }
                  },
                  {
                     "type": "null"
                  }
               ]
            },
            "modifiers": {
               "default": null,
               "type": "null"
            }
         },
         "required": [
            "_type",
            "name",
            "description",
            "notes",
            "modifiers"
         ],
         "additionalProperties": false
      },
      "Community": {
         "id": "Community",
         "title": "Community",
         "description": "A community that shaped a characters backstory",
         "examples": [
            {
               "_type": "community",
               "name": "Highborn",
               "description": "Being part of a highborn community means you're accustomed to a life of elegance, opulence, and prestige within the upper echelons of society.",
               "feature": {
                  "name": "Privilege",
                  "description": "You have advantage on rolls to consort with nobles, negotiate prices, or leverage your reputation to get what you want."
               }
            }
         ],
         "type": "object",
         "properties": {
            "_type": {
               "const": "community"
            },
            "name": {
               "type": "string"
            },
            "description": {
               "type": "string"
            },
            "feature": {
               "type": "object",
               "properties": {
                  "name": {
                     "type": "string"
                  },
                  "description": {
                     "type": "string"
                  }
               },
               "required": [
                  "name",
                  "description"
               ],
               "additionalProperties": false
            }
         },
         "required": [
            "_type",
            "name",
            "feature"
         ],
         "additionalProperties": false
      }
   }
}